"# PDFAnnotator" 

pip install -r requirements.txt
python main.py

## ⚙️ 機能一覧

### 1️⃣ PDF表示・ページ操作

- PDFファイルを開く **(Open)**
- 前へ・次へ ページ移動 **(Prev / Next)**
- ページ下に **「Page X / Y」** を表示
- 図形付きPDFを再出力 **(Export PDF)**

---

### 2️⃣ モード切替

| モード | 説明 |
|--------|------|
| **Move** | 図形移動・PDFパン操作・ハンドルリサイズ |
| **Draw** | 新しい図形（Rect, Ellipse, Line, Triangle, Text）を追加 |

- Move と Draw は **排他的**
- Moveを押すと図形ボタンが全OFF
- 図形ボタンを押すと自動的にDrawモードへ切り替え

---

### 3️⃣ 図形描画

| 種類 | 操作方法 |
|------|-----------|
| **長方形 (Rect)** | 1点目→2点目クリックで確定（プレビューあり） |
| **円 (Ellipse)** | クリックで中サイズの円を自動配置 |
| **線 (Line)** | ドラッグして線を描く（ドラッグ終了で確定） |
| **三角形 (Triangle)** | 3回クリックで確定。2点目時にプレビュー線、3点目で完成 |
| **テキスト (Text)** | クリック→文字入力ダイアログで挿入 |

---

### 4️⃣ 図形の選択・操作

#### 🔹 選択
- 線上または枠内をクリックで選択  
- PDF背景をクリックすると選択解除  

#### 🔹 移動
- 枠内ドラッグ → 図形全体移動  
- 線上ドラッグ → 拡縮  

#### 🔹 拡縮（ハンドル操作）

| 図形 | ハンドル配置 |
|------|---------------|
| **Rect / Ellipse / Text** | 四隅または上下左右（4〜8個） |
| **Line** | 両端2点 |
| **Triangle** | 各頂点3点 |

- ハンドルをドラッグでその点が移動  
- 他の点は固定され、形状が伸び縮み  
- 選択中は枠を太線で強調描画  

---

### 5️⃣ 図形削除

- 選択中の図形を削除  
  - キー: `Delete` または `Backspace`
  - ボタン: 🗑️「削除」
- 図形未選択時に押すと **ページ削除（最後のページは不可）**

---

### 6️⃣ ズーム機能

- `+ / -` ボタン または `Ctrl + マウスホイール`
- PDFと図形がスケールに追従して拡大・縮小

---

### 7️⃣ JSON保存／読み込み

- 現在の図形情報をJSON形式で保存／再読み込み可能
- ページごとに `shapes_by_page` に保持  

例：
```json
{
  "pdf_path": "test.pdf",
  "shapes_by_page": {
    "0": [{"type": "rect", "x":100, "y":200, "w":50, "h":30}],
    "1": [{"type": "text", "x":30, "y":50, "text":"サンプル"}]
  }
}
